using ArabicaCliento.Patches;
using ArabicaCliento.Systems;
using Content.Client.UserInterface.Controls;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.XAML;

namespace ArabicaCliento.UI;

[GenerateTypedNameReferences]
public sealed partial class CheatMenuWindow : FancyWindow
{
    [Dependency] private readonly EntityManager _entMan = default!;

    private readonly ArabicaSpinSystem? _spin; 
    public CheatMenuWindow()
    {
        RobustXamlLoader.Load(this);
        IoCManager.InjectDependencies(this);
        _spin ??= _entMan.System<ArabicaSpinSystem>();
        Ranged.Pressed = GunUpdatePatch.Enabled;
        Melee.Pressed = ClientHeavyAttackPatch.Enabled;
        Autospin.Pressed = _spin.Enabled;
        Ranged.OnToggled += args => { GunUpdatePatch.Enabled = args.Pressed; };
        Autospin.OnToggled += args => { if (_spin != null) _spin.Enabled = args.Pressed; };
    }
}